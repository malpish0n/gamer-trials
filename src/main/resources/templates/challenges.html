<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>All Challenges — GamerTrials</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<header class="gt-header">
    <div class="gt-container">
        <a href="/" class="gt-brand">
            <span class="gt-logo">GT</span>
            <span class="gt-name">GamerTrials</span>
        </a>
        <nav class="gt-nav">
            <a href="/challenges" class="gt-link gt-active">Challenges</a>
            <a href="/tournaments" class="gt-link">Tournaments</a>
            <a href="#" class="gt-link">Leaderboard</a>
            <a href="#" class="gt-link">Community</a>
        </nav>

        <div class="gt-actions">
            <div th:if="${#authorization.expression('!isAuthenticated()')}">
                <a class="gt-btn ghost" href="/login">Log In</a>
                <a class="gt-btn" href="/register">Join</a>
            </div>

            <div class="gt-user" th:if="${#authorization.expression('isAuthenticated()')}">
                <div class="user-trigger">
                    <span>Hi, <strong th:text="${#authentication.name}">User</strong></span>
                    <span class="arrow">▾</span>
                </div>
                <div class="user-menu">
                    <a th:href="@{/dashboard}">Dashboard</a>
                    <a th:href="@{/profile}">Profile</a>
                    <a href="#">Settings</a>
                    <a href="#">Activity</a>
                    <hr>
                    <a href="/logout">Logout</a>
                </div>
            </div>
        </div>
    </div>
</header>

<main class="gt-container">
    <section class="gt-section">
        <div class="sec-head">
            <h1>All Challenges</h1>
        </div>
        <div class="card-grid">
            <article class="challenge">
                <div class="c-head">
                    <h3>Sniper Elite</h3>
                    <span class="pill">+180 XP</span>
                </div>
                <p>Get 20 consecutive headshots. Precision matters.</p>
                <div class="c-meta">
                    <span>Avg. Time: 12 min</span>
                    <span>Completed: 3.1k</span>
                </div>
                <a class="gt-btn full" href="#">Join</a>
            </article>

            <article class="challenge">
                <div class="c-head">
                    <h3>Survivor Mode</h3>
                    <span class="pill">+220 XP</span>
                </div>
                <p>Survive 10 minutes without dying. Prove your skill.</p>
                <div class="c-meta">
                    <span>Avg. Time: 10 min</span>
                    <span>Completed: 4.6k</span>
                </div>
                <a class="gt-btn full" href="#">Join</a>
            </article>

            <article class="challenge">
                <div class="c-head">
                    <h3>Control Points</h3>
                    <span class="pill">+150 XP</span>
                </div>
                <p>Capture 10 points in one session. Teamwork required.</p>
                <div class="c-meta">
                    <span>Avg. Time: 8 min</span>
                    <span>Completed: 2.8k</span>
                </div>
                <a class="gt-btn full" href="#">Join</a>
            </article>

            <article class="challenge">
                <div class="c-head">
                    <h3>Speedrun Master</h3>
                    <span class="pill">+250 XP</span>
                </div>
                <p>Finish the map in record time and dominate the board.</p>
                <div class="c-meta">
                    <span>Avg. Time: 6 min</span>
                    <span>Completed: 5.2k</span>
                </div>
                <a class="gt-btn full" href="#">Join</a>
            </article>
        </div>
    </section>
</main>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const user = document.querySelector(".gt-user");
        if (!user) return;
        const menu = user.querySelector(".user-menu");
        const trigger = user.querySelector(".user-trigger");

        let hideTimer;
        const show = () => { clearTimeout(hideTimer); menu.style.display = "block"; };
        const hide = () => { hideTimer = setTimeout(() => { menu.style.display = "none"; }, 150); };

        trigger.addEventListener("mouseenter", show);
        trigger.addEventListener("mouseleave", hide);
        menu.addEventListener("mouseenter", show);
        menu.addEventListener("mouseleave", hide);
    });
</script>
</body>
</html>
